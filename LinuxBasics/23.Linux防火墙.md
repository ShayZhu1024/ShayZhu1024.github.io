# Linux 防火墙

## 概念
    Linux防火墙是由Netfilter组件提供的，NetFilter工作在内核空间，集成在Linux内核中，
    而iptables只是一个工作在用户空间的一个命令行工具，用来编写规则，写好的规则被送往netfilter，
    告诉内核如何去处理信息包

## 数据包过滤匹配流程

<img src="../images/iptables01.png">

## netfilter的5表和5链
### netfilter 提供了五种表，每种表用于处理不同类型的数据包决策：
* Filter Table：最常用的表，用于决定数据包的命运，如允许或阻止数据包通过。
* NAT Table：用于网络地址转换，如源NAT（SNAT）和目标NAT（DNAT）。
* Mangle Table：用于修改数据包的服务质量（QoS）标记和其他包头信息。
* Raw Table：用于设置不需要由连接跟踪系统处理的数据包。
* Security Table：用于设置强制访问控制（MAC）安全规则，通常与 SELinux 安全策略配合使用
### 五链,每个表包含几个预定义的链(内置链)，数据包根据其流向和处理需求经过不同的链：
* INPUT：处理到达本机的数据包。
* OUTPUT：处理由本机发出的数据包。
* FORWARD：处理穿过本机（路由）的数据包。
* PREROUTING：用于在路由决策之前处理进入的数据包（主要用在 NAT 表）。
* POSTROUTING：用于在路由决策之后处理即将离开的数据包（主要用在 NAT 表）。