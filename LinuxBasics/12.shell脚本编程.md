# shell脚本编程

## 1.脚本创建和执行

* 首行shebang机制,首行需要指明脚本执行的解释器, 例如`#!\bin\bash` 
* 注解使用#
* 标识符:数字 字母 下划线，开头不能是数字
* shebang下面 可以加上两行
    * set -u #未声明的变量不能引用
    * set -e #脚本发生错误，停止执行

### 不执行脚本只检查语法
bash -n script.sh

### 调试并执行
bash -x script.sh

### 执行脚本几种方式

bash script.sh

. script.sh  #在当前环境中执行

source script.sh #在当前环境中执行

chmod u+x script.sh
./script.sh


## 2.shell的变量

### 内置变量
    `PS1，PATH，UID，HOSTNAME，$$，BASHPID，PPID，$?，HISTSIZE SHLVL `

    $$ 和 BASHPID区别在于，在脚本中$$会显示最初的脚本BASH id， 不管是否是在子进程中打印$$,而BASHIP则是显示当前bash 进程id，注意这两个区别是在脚本中体现

    SHLVL shell的嵌套深度



### 用户自定义变量
```bash
变量=赋值  #即可完成变量定义，不要留有空格

作用范围，脚本执行的进程
```

### 注意： 
bash不支持浮点数

变量赋值是临时生效，当退出终端后，变量会自动删除，无法持久保存，脚本中的变量会随着脚
本结束，也会自动删除


### 环境变量
```bash
环境变量可以子进程中读到值，普通变量在子进程中无法读到值

export 变量

declare -x  变量

```

### 本地变量-局部变量
```bash
local 变量名字=值

这种变量只能在局部代码块有效， 通常在函数中

```

### 常量
```bash
readonly name
declare -r name

查看只读变量
readonly [-p]
declare -r

```

### 位置变量,在脚本中或者函数中存在
```bash
$1, $2, ... 对应第1个、第2个等参数，shift [n]换位置
$0 命令本身,包括路径
$* 传递给脚本的所有参数，全部参数合为一个字符串
$@ 传递给脚本的所有参数，每个参数为独立字符串
$# 传递给脚本的参数的个数
注意：$@ $* 只在被双引号包起来的时候才会有差异

```

### 变量的操作
```bash
普通操作下，默认bash中变量的值都是字符串
所以字符拼接：
X=${X}other-content
or
X+=other-content

通常对于变量引用，有一下方式
$VAR
${VAR} #这中方式可以方式名字和其他字符混淆
"${VAR}"  #这中方式可以防止字符分割同时可以保留VAR内容的原本格式

```





