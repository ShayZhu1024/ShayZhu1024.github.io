# ansible安装和常见模块

ansible 是一款可以在远程主机上批量执行命令的软件  

作者：Michael DeHaan（ Cobbler 与 Func 作者）

官网 https://www.ansible.com/    官方文档  https://docs.ansible.com/



### Ansible 功能

* 批量执行远程命令,可以对远程的多台主机同时进行命令的执行
* 批量安装和配置软件服务，可以对远程的多台主机进行自动化的方式配置和管理各种服务
* 编排高级的企业级复杂的IT架构任务, Ansible的Playbook和role可以轻松实现大型的IT复杂架构
* 提供自动化运维工具的开发API, 有很多运维工具,如jumpserver就是基于 ansible 实现自动化管理功能

### Ansible 特点

##### Ansible优点
* 功能丰富的模块：提供了多达数千个的各种功能的模块,完成特定任务只需调用特定模块即可，还支持自定义模块，可使用任何编程语言写模块
* 使用和部署简单: 无需安装专用代理软件,基于python和SSH(默认已安装)实现
* 安全: 基于OpenSSH实现安全通讯无需专用协议
* 幂等性：一个任务执行1遍和执行n遍效果一样，不因重复执行带来意外情况,此特性和模块有关
* 支持playbook编排任务，YAML格式，编排任务，支持丰富的数据结构
* 较强大的多层解决方案 Role
* Python语言实现, 基于Paramiko（python对ssh的实现），PyYAML，Jinja2（模板语言）三个关键模块
* 属于红帽(IBM)公司产品,背景强大,未来发展前景光明


##### Ansible缺点

* 如果管理的主机较多时,执行效率不如saltstack高
* 当前还不支持像MySQL数据库一样的事务回滚


### Ansible 架构

####  Ansible 组成

* INVENTORY：Ansible管理主机的清单文件,默认为 /etc/ansible/hosts
* MODULES：Ansible执行命令的功能模块，多数为内置核心模块，也可自定义
* PLUGINS：模块功能的补充，如连接类型插件、循环插件、变量插件、过滤插件等，该功能不常用
* API：供第三方程序调用的应用程序编程接口


#### Ansible 命令执行来源

* USER 普通用户，即SYSTEM ADMINISTRATOR
* PLAYBOOKS：任务剧本（任务集），编排定义Ansible任务集的配置文件，由Ansible顺序依次执行，通常是JSON格式的YML文件
* CMDB（配置管理数据库） API 调用
* PUBLIC/PRIVATE CLOUD API调用
* USER-> Ansible Playbook -> Ansibile

####  注意事项

* 执行ansible的主机一般称为管理端, 主控端，中控，master或堡垒机
* 主控端Python版本需要2.6或以上
* 被控端Python版本小于2.4，需要安装python-simplejson
* 被控端如开启SELinux需要安装libselinux-python
* windows 不能做为主控端,只能做为被控制端



### Ansible 安装


#### 官网下载安装
```bash
官方文档 https://docs.ansible.com/ansible/latest/installation_guide/index.html
下载 https://releases.ansible.com/ansible/
pip下载  https://pypi.org/project/ansible/



```


