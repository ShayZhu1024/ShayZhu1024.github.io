# PostgreSQL安装和基本使用

## 安装

#### yum或者apt 安装

###### redhat系安装
[postgresql-yum-rocky8](https://www.postgresql.org/download/linux/redhat/)

```bash
sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
sudo dnf -qy module disable postgresql
sudo dnf install -y postgresql16-server
sudo /usr/pgsql-16/bin/postgresql-16-setup initdb
sudo systemctl enable postgresql-16
sudo systemctl start postgresql-16
```

###### ubuntu 安装
[postgresql-apt-ubuntu20](https://www.postgresql.org/download/linux/ubuntu/)

```bash
sudo apt install curl ca-certificates
sudo install -d /usr/share/postgresql-common/pgdg
sudo curl -o /usr/share/postgresql-common/pgdg/apt.postgresql.org.asc --fail https://www.postgresql.org/media/keys/ACCC4CF8.asc
sudo sh -c 'echo "deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
sudo apt update
sudo apt -y install postgresql
```



#### 源码编译安装

1. 下载源码 https://www.postgresql.org/ftp/source/
2. 安装依赖:`yum install make readline-devel zlib-devel gcc libicu-devel -y `
3. ./configure  --prefix=/apps/pgsql  --with-pgport=5432
4. make -j 2 world
5. groupadd -r  postgres
6. useradd -r -s /bin/bash  -m  -g postgres -d  /data/postgres postgres
7. make install-world


